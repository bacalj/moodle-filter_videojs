YUI.add("moodle-filter_videojs-transcript",function(e,t){"use_strict";var n;M.filter_videojs=M.filter_videojs||{},n=M.filter_videojs.transcript={},n.init=function(t){typeof n.initialized=="undefined"&&(e.Get.load(["http://eik.local/videojs/dist/video-js/video-js.css","http://eik.local/videojs/dist/video-js/video.js"],function(t){if(t)return;videojs.options.flash.swf="http://eik.local/videojs/dist/video-js/video-js.swf",e.on("domready",function(){n.buildClipMenu()})}),n.initialized="initialized",n.videos=[]);var r=JSON.parse(t.clips);console.log(r),n.videos[r.id]=r},n.buildClipMenu=function(){n.players=e.all(".video-js"),n.players.each(function(t){t.setData("out",""),t.setData("in",0),t.setData("playerID",t._node.id);var r=videojs(t.getData("playerID"));r.on("timeupdate",function(){this.currentTime()<t.getData("in")&&this.currentTime(t.getData("in"));if(t.getData("out")==="")return;this.currentTime()>t.getData("out")&&(this.currentTime(t.getData("out")),this.pause())});var i=n.videos[t._node.id].clips;if(i.length>0){var s=e.Node.create("<ul></ul>");t.insert(s,"before");for(var o=0;o<i.length;o++){var u=o+1,a=i[o].params,f=a.label,l=": ";f==""&&(l="");var c=e.Node.create("<a href='#' class='filter-vjs-cliplink'>Clip "+u+l+f+"</a>");c.setData("params",a),c.setData("playerID",t._node.id),c.setData("clipSrc","http://kevinwiliarty.com/openvideo/remote-conbowling.ogv");var h=e.Node.create("<li></li>");h.append(c),s.append(h)}}}),e.on("domready",function(){alert("ready"),linkList=e.all(".filter-vjs-cliplink"),console.log(linkList),linkList.each(function(e){console.log(e),e.on("click",function(e){e.preventDefault(),n.playClip(this)})})})},n.playClip=function(e){var t=e.getData("params"),n=e.getData("playerID"),r=videojs(n);r.src("http://kevinwiliarty.com/openvideo/remote-conbowling.ogv"),r.play(),console.log(t.in);return}},"@VERSION@",{requires:["base","node","event","get"]});
